<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Ea$yBid | Sign Up</title>

	<link href="css/bootstrap.min.css" rel="stylesheet">

	<script type="text/javascript">
		//Regex expression to only allow characters a-z,A-Z and 0-9
		//Accepts a minimum of 1 character and a maximum of 20
		var userRegex = /^[a-zA-Z0-9_]{1,20}$/;

		//Create Regex for Email
		var userEmailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;


		//Function to validate user input based on conditions set
		function userValidate(form){

			//Create variable to store the first name the user enters
			var firstName = form.fname.value;

			//Create variable to store the last name the user enters
			var lastName = form.lname.value;

			//Create variable to store the email the user enters
			var email= form.email.value;

			//Store the username the user enters
			var username = form.username.value;

			//Store the password user enters
			var password = form.passwd.value;

			//Create an array to store the various types of errors
			var errors = [];


			//Check if user has entered a first name
			if(firstName.length=== 0)
			{
				errors[errors.length] = "Please enter a first name";
			}

			//Check if user has entered a last name
			if(lastName.length=== 0)
			{
				errors[errors.length] = "Please enter a last name";
			}

			//Check if user has entered a valid email
			if(!userEmailRegex.test(email)){
				errors[errors.length] = "Invalid Email";
			}

			//Test the username input against the Regex for username
			//Store the error message
			if(!userRegex.test(username)){
				errors[errors.length] = "Username Characters can only include 0-9, a-z and an underscore.";
			}

			//Check if username has entered a password
			if(password.length=== 0)
			{
				errors[errors.length] = "Please enter a password";
			}



			//If no errors alert user login was succeful
			if(errors.length <=0){
				alert("Sign Up Succesful");
				window.open ("home.html","_self");
			}

			//If an error is found output which error it is
			if(errors.length > 0){
				reportError(errors);
				return false;
			}
			return false;
		}


		//Function to report which error made
		function reportError(errors)
		{
			//Store the message to be output indicating what error is present
			var prompt = "Errors";

			//Loop through the errors array and print the respective error
			for (var i =0; i< errors.length; i++) {
				var numError = i +1 ;
				prompt += "\n" + numError + ". " + errors[i];
			}
			//Alert the user
			alert(prompt);
		}
	</script>

</head>
<body style = "padding-top: 50px; padding-bottom: 150px;">
	<div class = "container">
		<div class = "row">
			<div class="panel panel-default col-md-4 col-md-offset-4">
			  <div class="panel-body">
					<h1 class = "text-center">Sign Up</h1>
					<img class="img-responsive" src="img/Logo.png" alt="EasyBid Logo">
					<form method="post" action="" onsubmit="return userValidate(this)">
						<!-- Field first name -->
						<div class="form-group">
					    <label for="fname">First Name</label>
					    <input type="text" class="form-control" name="fname" id="fname" placeholder="First Name" required autofocus>
					  </div>
						<!-- Field for lastname -->
						<div class="form-group">
							<label for="lname">Last Name</label>
							<input type="text" class="form-control" name="lname" id="lname" placeholder="Last Name" required autofocus>
						</div>
						<div class="form-group">
							<label for="email">Email</label>
							<input type="email" class="form-control" name="email" id="email" placeholder="Email" required autofocus>
						</div>
						<!-- User enters username -->
						<div class="form-group">
					    <label for="username">Username</label>
					    <input type="text" class="form-control" name="username" id="username" maxlength="20" placeholder="Username" required autofocus>
					  </div>
						<!-- User enters password -->
						<div class="form-group">
					    <label for="passwd">Password</label>
					    <input type="password" class="form-control" name="passwd" id="passwd" placeholder="Password">
					  </div>
						<!-- Login Button -->
						<div class="form-group text-center">
							<button type="submit" class="btn btn-primary">Sign Up</button>
						</div>
					</form>
			  </div>
			</div>
		</div>
	</div>

	<!--Footer-->
	<nav class="navbar navbar-inverse navbar-fixed-bottom">
		<div class="container">
			<p></p>
			<p class="text-center" style = "color: #fff">Time is a-running</p>
		</div>
	</nav>

	<!--javascript-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
</body>
</html>
